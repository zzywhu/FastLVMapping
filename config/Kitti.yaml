%YAML:1.0
camera_model: "pinhole"  # Options: "fisheye" or "pinhole"
# Camera parameters
camera_matrix: !!opencv-matrix
  rows: 3
  cols: 3
  dt: f
  data: [788.629315, 0, 687.158398, 0, 786.382230, 317.752196, 0, 0, 1]
distortion_coefficients: !!opencv-matrix
  rows: 1
  cols: 5
  dt: f
  data: [0, 0, 0, 0, 0]

new_camera_matrix: !!opencv-matrix
  rows: 3
  cols: 3
  dt: f
  data: [800, 0, 696, 0, 800, 256, 0, 0, 1]

resize_camera_matrix: !!opencv-matrix
  rows: 3
  cols: 3
  dt: f
  data: [400, 0, 348, 0, 400, 128, 0, 0, 1]
  
extrinsics: !!opencv-matrix
  rows: 4
  cols: 4
  dt: d
  data: [0.0371783278, 0.9992675562, 0.0090621821, -0.0570625187, -0.0986182135, -0.0053553387, 0.9951109327, 0.8021927491, 0.9944306009, -0.0378902567, 0.0983468786, -1.5023956175, 0, 0, 0, 1]

# Data paths
pcd_path: /media/zzy/T7/SLAM_DATASET/test_color_mapping/kitti360/MapCloud.pcd
img_path: /media/zzy/T7/SLAM_DATASET/KITTI/KITTI-360/data_2d_raw/2013_05_28_drive_0000_sync/image_00/data_rgb
traj_path: /media/zzy/T7/SLAM_DATASET/test_color_mapping/kitti360/traj.txt
output_path: /media/zzy/T7/SLAM_DATASET/test_color_mapping/kitti360/result

# Point cloud parameters
point_cloud_params:
   min_depth: 0.1          # Minimum depth for visualization (meters)
   max_depth: 50.0         # Maximum depth for visualization (meters)
   neighborhood_size: 3    # Size of pixel neighborhood for depth checking

# Projection parameters
projection_params:
   image_width: 1392       # Width of undistorted image
   image_height: 512      # Height of undistorted image
   focal_length: 780     # Focal length for pinhole projection
   image_center_x: 696    # Image center X for pinhole projection
   image_center_y: 256    # Image center Y for pinhole projection
   valid_image_start_x: 200  # Start X of valid region in the image
   valid_image_start_y: 50  # Start Y of valid region in the image
   valid_image_end_x: 1000   # End X of valid region in the image
   valid_image_end_y: 250   # End Y of valid region in the image

# PnP parameters
pnp_params:
   max_rotation_diff: 2     # Maximum allowed rotation difference
   max_translation_diff: 2  # Maximum allowed translation difference
   reprojection_error: 8.0    # Reprojection error threshold for RANSAC
   min_inlier_count: 10       # Minimum number of inliers required
   ransac_iterations: 100     # Number of RANSAC iterations
   confidence: 0.99           # RANSAC confidence level

# Output parameters
output_params:
   visualization_tool: ""   # Path to visualization tool executable
   viz_frequency: 10        # How often to update visualization

# Processing parameters
processing_params:
   img_sampling_step: 3    # Step size for image sampling (e.g., 2 means every other image)
   preprocess_sampling_step: 3  # Step size for preprocessing (every other image)

# Depth processing parameters
depth_params:
   kernel_size: 5          # Kernel size for depth filtering
   fill_holes: true         # Whether to fill holes in depth map
   median_filter_size: 5    # Size of median filter for depth smoothing
   gaussian_filter_size: 3  # Size of gaussian filter for depth smoothing
   invert_depth: false      # Whether to invert depth values (far=bright, near=dark)
   
# Match parameters for feature matching
match_params:
   matcher_type: "FLANN"     # Feature matcher type (FLANN or BF)
   ratio_threshold: 0.75     # Ratio test threshold for FLANN matcher
   max_distance: 30          # Maximum pixel distance for matches
   min_matches: 20           # Minimum number of matches required
   use_ransac: true          # Whether to use RANSAC for match filtering
